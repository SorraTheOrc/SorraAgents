{"effort": {"unit": "hours", "tshirt": "L", "o": 43.0, "m": 71.0, "p": 118.0, "expected": 74.17, "recommended": 104.17, "range": [73.0, 148.0]}, "risk": {"probability": 3.1, "impact": 4.14, "score": 13, "level": "High", "top_drivers": ["TEST: Synthetic issue for effort_and_risk skill (synthetic)", "TEST CHILD 1: part of SA-0MKT9O9AY002COU8", "TEST CHILD 2: part of SA-0MKT9O9AY002COU8"], "mitigations": ["Add targeted tests and integration checks", "Lock dependencies and add compatibility tests", "Schedule extra review for risky components"]}, "confidence_percent": 82, "assumptions": ["Existing skill framework and CLI plumbing can be reused", "No major refactor of existing skills is required", "Test harness can validate JSON output deterministically"], "unknowns": ["Exact location and conventions for new command wiring", "Edge cases in output validation and error handling", "Acceptance expectations for narrative formatting"], "update_result": {"success": true, "returncode": 0, "stdout": "{\n  \"success\": true,\n  \"workItem\": {\n    \"id\": \"SA-0MKSTQR3H1HLD7HC\",\n    \"title\": \"Risk and Effort Estimator Skill\",\n    \"description\": \"Title: Risk and Effort Edtimator Skill\\nPriority: P0\\nLabels: P0, feature, spec\\nAssignees: @product-owner\\n\\nDescription\\n-----------\\nCreate a new \\\"Risk and Effort\\\" skill that produces conservative, structured engineering estimates and risk assessments from an issue text. The skill must expose a reliable command to trigger it and must follow the exact output format and constraints below.\\n\\nTrigger command (suggested)\\n---------------------------\\nUse a single command that reliably invokes the skill. Suggested CLI command:\\n\\n`opencode skill run risk-and-effort-edtimator`\\n\\nDraft prompt (to be embedded in the skill)\\n----------------------------------------\\nYou are an expert engineering estimator. Your task: review the issue and produce risk and effort estimates using recognized best practices (WBS, three-point/PERT, uncertainty, assumptions, risk matrix).\\n\\nHard constraints:\\n- You must NOT ask any follow-up questions.\\n- You must NOT assume access to code, repo, logs, or stakeholders.\\n- You must work ONLY with the content inside <system-reminder> (treat it as the full issue context). If details are missing, call them out explicitly and choose conservative estimates.\\n\\nWhat to do:\\n1) Restate the issue in 1\u20132 sentences (to prove understanding).\\n2) Identify scope boundaries:\\n   - In scope\\n   - Out of scope\\n3) Build a lightweight work breakdown (WBS) with 5\u201312 items (design, implementation, tests, docs, rollout, monitoring), noting likely dependencies and unknowns.\\n4) Effort estimate (use three-point estimating / PERT):\\n   - Provide Optimistic (O), Most Likely (M), Pessimistic (P) in \u201cideal engineering days\u201d (or hours if very small).\\n   - Compute Expected (E) = (O + 4M + P) / 6.\\n   - Add \u201ccoordination overhead\u201d and \u201crisk buffer\u201d explicitly if warranted (don\u2019t hide it).\\n   - Provide a final range (min\u2013max) and a single recommended planning value.\\n   - Also provide a T-shirt size (XS/S/M/L/XL) with clear thresholds you define.\\n5) Risk estimate (use a probability x impact matrix):\\n   - Score Probability (1\u20135) and Impact (1\u20135).\\n   - Overall Risk Score = Probability * Impact (1\u201325) and map to: Low (1\u20135), Medium (6\u201312), High (13\u201319), Critical (20\u201325).\\n   - Break risk into categories with 1\u20132 bullets each: Technical, Product/Requirements, Delivery/Dependencies, Operational/Performance, Security/Compliance.\\n   - Include top 3 risk drivers and the best mitigation for each.\\n6) Confidence:\\n   - Provide confidence % (0\u2013100) with a one-line justification referencing missing info/uncertainty.\\n7) If the issue is underspecified, propose a \u201cspike\u201d option:\\n   - Spike goal, timebox, and how it would reduce uncertainty (and how estimates would change).\\n\\nOutput format\\n-------------\\n- First: a compact JSON block with keys exactly:\\n  - effort: { \\\"unit\\\": \\\"ideal_days\\\", \\\"tshirt\\\": \\\"\\\", \\\"o\\\": 0, \\\"m\\\": 0, \\\"p\\\": 0, \\\"expected\\\": 0, \\\"recommended\\\": 0, \\\"range\\\": [0,0] }\\n  - risk: { \\\"probability\\\": 0, \\\"impact\\\": 0, \\\"score\\\": 0, \\\"level\\\": \\\"\\\", \\\"top_drivers\\\": [], \\\"mitigations\\\": [] }\\n  - confidence_percent: 0\\n  - assumptions: []\\n  - unknowns: []\\n- Then: a brief narrative (bulleted) explaining the reasoning, WBS, and what would most change the estimates.\\n\\nIntegration details / constraints\\n--------------------------------\\n- The skill must accept an input block called <system-reminder> and must use only that content to produce estimates.\\n- The skill must never ask follow-up questions; if information is missing it should explicitly list unknowns and choose conservative estimates.\\n- The produced JSON must match the key names and types exactly to allow programmatic consumption.\\n\\nAcceptance criteria\\n-------------------\\n- Running `opencode skill run risk-and-effort-edtimator` with an input issue containing a <system-reminder> block returns a valid JSON block followed by the narrative.\\n- JSON validates against the shape described above and numbers are realistic (non-negative, expected computed correctly).\\n- The narrative includes a 5\u201312 item WBS and top 3 risk drivers with mitigations.\\n\\nSuggested next steps\\n--------------------\\n1. Create a GitHub issue from this file (title: \\\"Risk and Effort Edtimator Skill\\\").\\n2. Add labels: `P0`, `feature`, `spec`.\\n3. Assign a product owner (@product-owner) and link to this worklog file.\\n4. Implement the skill (prototype using the draft prompt); expose the CLI command `opencode skill run risk-and-effort-edtimator`.\\n5. Write automated tests validating JSON output shape and example estimates for 2\u20133 representative issues.\\n\\nNotes\\n-----\\n- This is a top-level P0 issue describing the desired new skill and the exact estimation output format required from the skill.\\n- The skill must be conservative by default and must flag missing info rather than inventing it.\",\n    \"status\": \"open\",\n    \"priority\": \"high\",\n    \"parentId\": null,\n    \"createdAt\": \"2026-01-24T21:31:06.797Z\",\n    \"updatedAt\": \"2026-01-25T06:34:56.221Z\",\n    \"tags\": [\n      \"P0\",\n      \"feature\",\n      \"spec\"\n    ],\n    \"assignee\": \"@product-owner\",\n    \"stage\": \"plan_complete\",\n    \"issueType\": \"\",\n    \"createdBy\": \"\",\n    \"deletedBy\": \"\",\n    \"deleteReason\": \"\",\n    \"risk\": \"High\",\n    \"effort\": \"L\",\n    \"githubIssueNumber\": 3,\n    \"githubIssueId\": 3852122460,\n    \"githubIssueUpdatedAt\": \"2026-01-24T21:37:58Z\"\n  }\n}\n", "stderr": ""}, "human_text": "# Effort and Risk Report\n\nEffort     | Large   |  74.17h\nRisk       | High    |  13/20\nConfidence | 82%     |  unknowns: Exact location and conventions for new command wiring; Edge cases in output validation and error handling; Acceptance expectations for narrative formatting\n", "human_render_rc": 0, "human_render_stderr": "", "comment_result": {"returncode": 0, "stdout": "{\n  \"success\": true,\n  \"comment\": {\n    \"id\": \"SA-C0MKTD649X0KE2JUQ\",\n    \"workItemId\": \"SA-0MKSTQR3H1HLD7HC\",\n    \"author\": \"effort_and_risk_skill\",\n    \"comment\": \"# Effort and Risk Report\\n\\nEffort     | Large   |  74.17h\\nRisk       | High    |  13/20\\nConfidence | 82%     |  unknowns: Exact location and conventions for new command wiring; Edge cases in output validation and error handling; Acceptance expectations for narrative formatting\\n\\n\\n```json\\n{\\n  \\\"effort\\\": {\\n    \\\"unit\\\": \\\"hours\\\",\\n    \\\"tshirt\\\": \\\"L\\\",\\n    \\\"o\\\": 43.0,\\n    \\\"m\\\": 71.0,\\n    \\\"p\\\": 118.0,\\n    \\\"expected\\\": 74.17,\\n    \\\"recommended\\\": 104.17,\\n    \\\"range\\\": [\\n      73.0,\\n      148.0\\n    ]\\n  },\\n  \\\"risk\\\": {\\n    \\\"probability\\\": 3.1,\\n    \\\"impact\\\": 4.14,\\n    \\\"score\\\": 13,\\n    \\\"level\\\": \\\"High\\\",\\n    \\\"top_drivers\\\": [\\n      \\\"TEST: Synthetic issue for effort_and_risk skill (synthetic)\\\",\\n      \\\"TEST CHILD 1: part of SA-0MKT9O9AY002COU8\\\",\\n      \\\"TEST CHILD 2: part of SA-0MKT9O9AY002COU8\\\"\\n    ],\\n    \\\"mitigations\\\": [\\n      \\\"Add targeted tests and integration checks\\\",\\n      \\\"Lock dependencies and add compatibility tests\\\",\\n      \\\"Schedule extra review for risky components\\\"\\n    ]\\n  },\\n  \\\"confidence_percent\\\": 82,\\n  \\\"assumptions\\\": [\\n    \\\"Existing skill framework and CLI plumbing can be reused\\\",\\n    \\\"No major refactor of existing skills is required\\\",\\n    \\\"Test harness can validate JSON output deterministically\\\"\\n  ],\\n  \\\"unknowns\\\": [\\n    \\\"Exact location and conventions for new command wiring\\\",\\n    \\\"Edge cases in output validation and error handling\\\",\\n    \\\"Acceptance expectations for narrative formatting\\\"\\n  ]\\n}\\n```\",\n    \"createdAt\": \"2026-01-25T06:34:56.421Z\",\n    \"references\": []\n  }\n}\n", "stderr": "", "success": true, "comment_file": "/tmp/tmplv48dm3r"}}
